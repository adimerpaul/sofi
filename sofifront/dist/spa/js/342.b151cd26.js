"use strict";(self["webpackChunksofi"]=self["webpackChunksofi"]||[]).push([[342],{15342:(e,t,l)=>{l.r(t),l.d(t,{default:()=>K});l(10071);var s=l(83673),a=l(62323);const o={class:"q-pa-md"},r={class:"row items-center q-gutter-sm q-mb-md"},c={class:"col-auto"},d={class:"col-auto"},i={class:"col-auto"},n={class:"row q-col-gutter-sm"},u={class:"col-12 col-sm-3"},m={class:"col-12 col-sm-3"},p={class:"col-12 col-sm-4"},h={class:"col-12 col-sm-2 flex items-center"},g={class:"row q-gutter-sm full-width"},w={class:"q-pa-sm bg-grey-1 text-grey-8 text-caption"},_={key:0},f={class:"text-left"},b={class:"text-left ellipsis"},x={class:"text-right"},y={class:"text-right text-weight-bold text-positive"},k={class:"text-left"},q={class:"prod-list"},v={class:"code"},D={class:"name"},W={key:0,class:"muted"},z={key:0},U={key:1},C={colspan:"7",class:"text-center q-pa-md"};function I(e,t,l,I,B,V){const Z=(0,s.up)("q-chip"),N=(0,s.up)("q-input"),Q=(0,s.up)("q-icon"),S=(0,s.up)("q-btn"),P=(0,s.up)("q-card"),A=(0,s.up)("q-badge"),O=(0,s.up)("q-spinner"),T=(0,s.up)("q-markup-table");return(0,s.wg)(),(0,s.iD)("div",o,[(0,s._)("div",r,[t[9]||(t[9]=(0,s._)("div",{class:"col-12 col-md"},[(0,s._)("div",{class:"text-h6 text-weight-bold"},"Pedidos (simple)"),(0,s._)("div",{class:"text-caption text-grey-7"},"Consulta por rango de fechas y búsqueda libre")],-1)),(0,s._)("div",c,[(0,s.Wm)(Z,{square:"",color:"primary","text-color":"white",dense:"",icon:"shopping_cart"},{default:(0,s.w5)((()=>[t[3]||(t[3]=(0,s._)("span",{class:"text-caption"},"Pedidos:",-1)),t[4]||(t[4]=(0,s.Uk)(" ",-1)),(0,s._)("b",null,(0,a.zw)(B.rows.length),1)])),_:1})]),(0,s._)("div",d,[(0,s.Wm)(Z,{square:"",color:"teal","text-color":"white",dense:"",icon:"list_alt"},{default:(0,s.w5)((()=>[t[5]||(t[5]=(0,s._)("span",{class:"text-caption"},"Items:",-1)),t[6]||(t[6]=(0,s.Uk)(" ",-1)),(0,s._)("b",null,(0,a.zw)(V.totalItems),1)])),_:1})]),(0,s._)("div",i,[(0,s.Wm)(Z,{square:"",color:"positive","text-color":"white",dense:"",icon:"attach_money"},{default:(0,s.w5)((()=>[t[7]||(t[7]=(0,s._)("span",{class:"text-caption"},"Total Bs:",-1)),t[8]||(t[8]=(0,s.Uk)(" ",-1)),(0,s._)("b",null,(0,a.zw)(V.fmt(V.totalBs)),1)])),_:1})])]),(0,s.Wm)(P,{flat:"",bordered:"",class:"q-pa-sm q-mb-md"},{default:(0,s.w5)((()=>[(0,s._)("div",n,[(0,s._)("div",u,[(0,s.Wm)(N,{type:"date",modelValue:B.from,"onUpdate:modelValue":t[0]||(t[0]=e=>B.from=e),dense:"",outlined:"",label:"Desde"},null,8,["modelValue"])]),(0,s._)("div",m,[(0,s.Wm)(N,{type:"date",modelValue:B.to,"onUpdate:modelValue":t[1]||(t[1]=e=>B.to=e),dense:"",outlined:"",label:"Hasta"},null,8,["modelValue"])]),(0,s._)("div",p,[(0,s.Wm)(N,{modelValue:B.search,"onUpdate:modelValue":t[2]||(t[2]=e=>B.search=e),dense:"",outlined:"",clearable:"",label:"Buscar (cliente, dirección, pedido, producto)"},{append:(0,s.w5)((()=>[(0,s.Wm)(Q,{name:"search"})])),_:1},8,["modelValue"])]),(0,s._)("div",h,[(0,s._)("div",g,[(0,s.Wm)(S,{loading:B.loading,class:"col",color:"red-6",icon:"search","no-caps":"",label:"Buscar",onClick:V.fetchData},null,8,["loading","onClick"]),(0,s.Wm)(S,{loading:B.loading,class:"col",flat:"",color:"grey-7",icon:"layers_clear","no-caps":"",label:"Limpiar",onClick:V.reset},null,8,["loading","onClick"])])])])])),_:1}),(0,s.Wm)(P,{flat:"",bordered:""},{default:(0,s.w5)((()=>[(0,s._)("div",w,[t[10]||(t[10]=(0,s.Uk)(" Resultados: ",-1)),(0,s._)("b",null,(0,a.zw)(B.rows.length),1)]),(0,s.Wm)(T,{dense:"","wrap-cells":"",flat:"",class:"rounded-borders q-ma-none table-compact"},{default:(0,s.w5)((()=>[t[13]||(t[13]=(0,s._)("thead",null,[(0,s._)("tr",{class:"bg-red-6 text-white"},[(0,s._)("th",{class:"text-left"},"Pedido"),(0,s._)("th",{class:"text-left"},"Cliente"),(0,s._)("th",{class:"text-right"},"Ítems"),(0,s._)("th",{class:"text-right"},"Total Bs."),(0,s._)("th",{class:"text-left"},"Productos")])],-1)),B.loading?((0,s.wg)(),(0,s.iD)("tbody",U,[(0,s._)("tr",null,[(0,s._)("td",C,[(0,s.Wm)(O,{color:"red-6",size:"24px",class:"q-mr-sm"}),t[12]||(t[12]=(0,s.Uk)(" Cargando… ",-1))])])])):((0,s.wg)(),(0,s.iD)("tbody",_,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(B.rows,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.nro_pedido,class:"hoverable"},[(0,s._)("td",f,[(0,s.Wm)(A,{color:"red-4","text-color":"white",class:"q-mr-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)("#"+(0,a.zw)(e.nro_pedido),1)])),_:2},1024),(0,s.Wm)(A,{color:e.confirmado?"green-6":"orange-6","text-color":"white"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.confirmado?"CONFIRMADO":"PENDIENTE"),1)])),_:2},1032,["color"])]),(0,s._)("td",b,(0,a.zw)(e.cliente_nombre),1),(0,s._)("td",x,(0,a.zw)((e.detalles||[]).length),1),(0,s._)("td",y,(0,a.zw)(V.fmt(V.sumDetalles(e.detalles,"subtotal"))),1),(0,s._)("td",k,[(0,s._)("ul",q,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.detalles,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s._)("span",v,(0,a.zw)(e.cod_prod),1),(0,s._)("span",D,(0,a.zw)(e.nombre),1),(0,s.Wm)(A,{color:"blue-2","text-color":"blue-10",class:"badge-xs q-mx-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)(" x"+(0,a.zw)(V.n2(e.cantidad)),1)])),_:2},1024),Number(e.peso)>0?((0,s.wg)(),(0,s.j4)(A,{key:0,color:"grey-2","text-color":"grey-9",class:"badge-xs q-mr-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(V.n2(e.peso))+" kg ",1)])),_:2},1024)):(0,s.kq)("",!0),(0,s.Wm)(A,{color:"green-2","text-color":"green-10",class:"badge-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Bs. "+(0,a.zw)(V.fmt(e.subtotal)),1)])),_:2},1024)])))),128)),e.detalles&&0!==e.detalles.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",W,"Sin productos"))])])])))),128)),0===B.rows.length?((0,s.wg)(),(0,s.iD)("tr",z,[...t[11]||(t[11]=[(0,s._)("td",{colspan:"7",class:"text-center text-grey q-pa-md"},"No hay resultados…",-1)])])):(0,s.kq)("",!0)]))])),_:1})])),_:1})])}const B={name:"PedidosSimple",data(){const e=(new Date).toISOString().substr(0,10);return{from:e,to:e,search:"",loading:!1,rows:[]}},computed:{totalItems(){return this.rows.reduce(((e,t)=>e+(t.detalles?t.detalles.length:0)),0)},totalBs(){return this.rows.reduce(((e,t)=>e+this.sumDetalles(t.detalles,"subtotal")),0)}},created(){this.fetchData()},methods:{async fetchData(){this.loading=!0;try{const{data:e}=await this.$api.get("/pedidos-simple",{params:{from:this.from,to:this.to,search:this.search}});this.rows=Array.isArray(e.data)?e.data:[]}catch(l){var e,t;this.$q.notify({type:"negative",message:(null===(e=l.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||l.message})}finally{this.loading=!1}},reset(){const e=(new Date).toISOString().substr(0,10);this.from=e,this.to=e,this.search="",this.fetchData()},sumDetalles(e,t){return Array.isArray(e)?e.reduce(((e,l)=>e+Number(l[t]||0)),0):0},fmt(e){return Number(e||0).toFixed(2)},n2(e){return Number(e||0).toFixed(2)}}};var V=l(74260),Z=l(67030),N=l(10151),Q=l(64689),S=l(24554),P=l(2165),A=l(30481),O=l(69721),T=l(39754),E=l(7518),F=l.n(E);const H=(0,V.Z)(B,[["render",I],["__scopeId","data-v-6f4c3e6c"]]),K=H;F()(B,"components",{QChip:Z.Z,QCard:N.Z,QInput:Q.Z,QIcon:S.Z,QBtn:P.Z,QMarkupTable:A.Z,QBadge:O.Z,QSpinner:T.Z})}}]);
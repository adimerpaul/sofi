"use strict";(self["webpackChunksofi"]=self["webpackChunksofi"]||[]).push([[342],{15342:(e,t,l)=>{l.r(t),l.d(t,{default:()=>se});var s=l(83673),a=l(62323);const o=e=>((0,s.dD)("data-v-6f4c3e6c"),e=e(),(0,s.Cn)(),e),r={class:"q-pa-md"},c={class:"row items-center q-gutter-sm q-mb-md"},d=o((()=>(0,s._)("div",{class:"col-12 col-md"},[(0,s._)("div",{class:"text-h6 text-weight-bold"},"Pedidos (simple)"),(0,s._)("div",{class:"text-caption text-grey-7"},"Consulta por rango de fechas y búsqueda libre")],-1))),i={class:"col-auto"},n=o((()=>(0,s._)("span",{class:"text-caption"},"Pedidos:",-1))),u=(0,s.Uk)(" "),m={class:"col-auto"},p=o((()=>(0,s._)("span",{class:"text-caption"},"Items:",-1))),h=(0,s.Uk)(" "),g={class:"col-auto"},w=o((()=>(0,s._)("span",{class:"text-caption"},"Total Bs:",-1))),_=(0,s.Uk)(" "),f={class:"row q-col-gutter-sm"},b={class:"col-12 col-sm-3"},x={class:"col-12 col-sm-3"},y={class:"col-12 col-sm-4"},k={class:"col-12 col-sm-2 flex items-center"},q={class:"row q-gutter-sm full-width"},v={class:"q-pa-sm bg-grey-1 text-grey-8 text-caption"},D=(0,s.Uk)(" Resultados: "),W=o((()=>(0,s._)("thead",null,[(0,s._)("tr",{class:"bg-red-6 text-white"},[(0,s._)("th",{class:"text-left"},"Pedido"),(0,s._)("th",{class:"text-left"},"Cliente"),(0,s._)("th",{class:"text-right"},"Ítems"),(0,s._)("th",{class:"text-right"},"Total Bs."),(0,s._)("th",{class:"text-left"},"Productos")])],-1))),z={key:0},C={class:"text-left"},U={class:"text-left ellipsis"},I={class:"text-right"},B={class:"text-right text-weight-bold text-positive"},V={class:"text-left"},Z={class:"prod-list"},N={class:"code"},Q={class:"name"},S={key:0,class:"muted"},P={key:0},A=o((()=>(0,s._)("td",{colspan:"7",class:"text-center text-grey q-pa-md"},"No hay resultados…",-1))),O=[A],T={key:1},E={colspan:"7",class:"text-center q-pa-md"},F=(0,s.Uk)(" Cargando… ");function H(e,t,l,o,A,H){const K=(0,s.up)("q-chip"),M=(0,s.up)("q-input"),R=(0,s.up)("q-icon"),Y=(0,s.up)("q-btn"),$=(0,s.up)("q-card"),j=(0,s.up)("q-badge"),L=(0,s.up)("q-spinner"),G=(0,s.up)("q-markup-table");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",c,[d,(0,s._)("div",i,[(0,s.Wm)(K,{square:"",color:"primary","text-color":"white",dense:"",icon:"shopping_cart"},{default:(0,s.w5)((()=>[n,u,(0,s._)("b",null,(0,a.zw)(A.rows.length),1)])),_:1})]),(0,s._)("div",m,[(0,s.Wm)(K,{square:"",color:"teal","text-color":"white",dense:"",icon:"list_alt"},{default:(0,s.w5)((()=>[p,h,(0,s._)("b",null,(0,a.zw)(H.totalItems),1)])),_:1})]),(0,s._)("div",g,[(0,s.Wm)(K,{square:"",color:"positive","text-color":"white",dense:"",icon:"attach_money"},{default:(0,s.w5)((()=>[w,_,(0,s._)("b",null,(0,a.zw)(H.fmt(H.totalBs)),1)])),_:1})])]),(0,s.Wm)($,{flat:"",bordered:"",class:"q-pa-sm q-mb-md"},{default:(0,s.w5)((()=>[(0,s._)("div",f,[(0,s._)("div",b,[(0,s.Wm)(M,{type:"date",modelValue:A.from,"onUpdate:modelValue":t[0]||(t[0]=e=>A.from=e),dense:"",outlined:"",label:"Desde"},null,8,["modelValue"])]),(0,s._)("div",x,[(0,s.Wm)(M,{type:"date",modelValue:A.to,"onUpdate:modelValue":t[1]||(t[1]=e=>A.to=e),dense:"",outlined:"",label:"Hasta"},null,8,["modelValue"])]),(0,s._)("div",y,[(0,s.Wm)(M,{modelValue:A.search,"onUpdate:modelValue":t[2]||(t[2]=e=>A.search=e),dense:"",outlined:"",clearable:"",label:"Buscar (cliente, dirección, pedido, producto)"},{append:(0,s.w5)((()=>[(0,s.Wm)(R,{name:"search"})])),_:1},8,["modelValue"])]),(0,s._)("div",k,[(0,s._)("div",q,[(0,s.Wm)(Y,{loading:A.loading,class:"col",color:"red-6",icon:"search","no-caps":"",label:"Buscar",onClick:H.fetchData},null,8,["loading","onClick"]),(0,s.Wm)(Y,{loading:A.loading,class:"col",flat:"",color:"grey-7",icon:"layers_clear","no-caps":"",label:"Limpiar",onClick:H.reset},null,8,["loading","onClick"])])])])])),_:1}),(0,s.Wm)($,{flat:"",bordered:""},{default:(0,s.w5)((()=>[(0,s._)("div",v,[D,(0,s._)("b",null,(0,a.zw)(A.rows.length),1)]),(0,s.Wm)(G,{dense:"","wrap-cells":"",flat:"",class:"rounded-borders q-ma-none table-compact"},{default:(0,s.w5)((()=>[W,A.loading?((0,s.wg)(),(0,s.iD)("tbody",T,[(0,s._)("tr",null,[(0,s._)("td",E,[(0,s.Wm)(L,{color:"red-6",size:"24px",class:"q-mr-sm"}),F])])])):((0,s.wg)(),(0,s.iD)("tbody",z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.rows,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.nro_pedido,class:"hoverable"},[(0,s._)("td",C,[(0,s.Wm)(j,{color:"red-4","text-color":"white",class:"q-mr-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)("#"+(0,a.zw)(e.nro_pedido),1)])),_:2},1024),(0,s.Wm)(j,{color:e.confirmado?"green-6":"orange-6","text-color":"white"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(e.confirmado?"CONFIRMADO":"PENDIENTE"),1)])),_:2},1032,["color"])]),(0,s._)("td",U,(0,a.zw)(e.cliente_nombre),1),(0,s._)("td",I,(0,a.zw)((e.detalles||[]).length),1),(0,s._)("td",B,(0,a.zw)(H.fmt(H.sumDetalles(e.detalles,"subtotal"))),1),(0,s._)("td",V,[(0,s._)("ul",Z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.detalles,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.id},[(0,s._)("span",N,(0,a.zw)(e.cod_prod),1),(0,s._)("span",Q,(0,a.zw)(e.nombre),1),(0,s.Wm)(j,{color:"blue-2","text-color":"blue-10",class:"badge-xs q-mx-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)(" x"+(0,a.zw)(H.n2(e.cantidad)),1)])),_:2},1024),Number(e.peso)>0?((0,s.wg)(),(0,s.j4)(j,{key:0,color:"grey-2","text-color":"grey-9",class:"badge-xs q-mr-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(H.n2(e.peso))+" kg ",1)])),_:2},1024)):(0,s.kq)("",!0),(0,s.Wm)(j,{color:"green-2","text-color":"green-10",class:"badge-xs"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Bs. "+(0,a.zw)(H.fmt(e.subtotal)),1)])),_:2},1024)])))),128)),e.detalles&&0!==e.detalles.length?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("li",S,"Sin productos"))])])])))),128)),0===A.rows.length?((0,s.wg)(),(0,s.iD)("tr",P,O)):(0,s.kq)("",!0)]))])),_:1})])),_:1})])}const K={name:"PedidosSimple",data(){const e=(new Date).toISOString().substr(0,10);return{from:e,to:e,search:"",loading:!1,rows:[]}},computed:{totalItems(){return this.rows.reduce(((e,t)=>e+(t.detalles?t.detalles.length:0)),0)},totalBs(){return this.rows.reduce(((e,t)=>e+this.sumDetalles(t.detalles,"subtotal")),0)}},created(){this.fetchData()},methods:{async fetchData(){this.loading=!0;try{const{data:e}=await this.$api.get("/pedidos-simple",{params:{from:this.from,to:this.to,search:this.search}});this.rows=Array.isArray(e.data)?e.data:[]}catch(l){var e,t;this.$q.notify({type:"negative",message:(null===(e=l.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||l.message})}finally{this.loading=!1}},reset(){const e=(new Date).toISOString().substr(0,10);this.from=e,this.to=e,this.search="",this.fetchData()},sumDetalles(e,t){return Array.isArray(e)?e.reduce(((e,l)=>e+Number(l[t]||0)),0):0},fmt(e){return Number(e||0).toFixed(2)},n2(e){return Number(e||0).toFixed(2)}}};var M=l(74260),R=l(67030),Y=l(10151),$=l(64689),j=l(24554),L=l(2165),G=l(30481),J=l(69721),X=l(39754),ee=l(7518),te=l.n(ee);const le=(0,M.Z)(K,[["render",H],["__scopeId","data-v-6f4c3e6c"]]),se=le;te()(K,"components",{QChip:R.Z,QCard:Y.Z,QInput:$.Z,QIcon:j.Z,QBtn:L.Z,QMarkupTable:G.Z,QBadge:J.Z,QSpinner:X.Z})}}]);
"use strict";(self["webpackChunksofi"]=self["webpackChunksofi"]||[]).push([[162],{60162:(l,e,o)=>{o.r(e),o.d(e,{default:()=>E});var a=o(83673),d=o(62323);const t={class:"row"},i={class:"col-12 col-md-3"},s={class:"col-12 col-md-3"},n={class:"col-12 col-md-2 text-center"},u=(0,a._)("div",{class:"col-12"},null,-1),r={class:"col-12 col-md-4"},c=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"#"),(0,a._)("th",null,"Pedidos"),(0,a._)("th",null,"Cantidades")])],-1),p=["onClick"],m={class:"absolute-full flex flex-center"},b={class:"absolute-full flex flex-center"},h={class:"absolute-full flex flex-center"},v=(0,a._)("td",null,null,-1),f=(0,a._)("td",{class:"text-right text-bold"},"Total",-1),_={class:"text-bold text-right"},g={class:"col-12 col-md-8"},w={style:{height:"350px",width:"100%"}};function x(l,e,o,x,k,C){const W=(0,a.up)("q-input"),L=(0,a.up)("q-select"),z=(0,a.up)("q-btn"),y=(0,a.up)("q-badge"),M=(0,a.up)("q-linear-progress"),D=(0,a.up)("q-markup-table"),O=(0,a.up)("LTileLayer"),V=(0,a.up)("l-tooltip"),q=(0,a.up)("l-icon"),Q=(0,a.up)("l-marker"),Z=(0,a.up)("l-map"),A=(0,a.up)("q-card-section"),R=(0,a.up)("q-card"),T=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(T,{class:"bg-grey-3 q-pa-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(R,{flat:"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a._)("div",t,[(0,a._)("div",i,[(0,a.Wm)(W,{modelValue:k.fecha,"onUpdate:modelValue":e[0]||(e[0]=l=>k.fecha=l),label:"Fecha",type:"date",dense:"",outlined:""},null,8,["modelValue"])]),(0,a._)("div",s,[(0,a.Wm)(L,{modelValue:k.tipo,"onUpdate:modelValue":e[1]||(e[1]=l=>k.tipo=l),label:"Tipo",dense:"",outlined:"",options:k.tipos,"emit-value":"","map-options":""},null,8,["modelValue","options"])]),(0,a._)("div",n,[(0,a.Wm)(z,{label:"Buscar",color:"primary",dense:"",onClick:C.buscar,icon:"search","no-caps":"",loading:k.loading},null,8,["onClick","loading"])]),u,(0,a._)("div",r,[(0,a.Wm)(D,{flat:"",bordered:"",dense:"","wrap-cells":""},{default:(0,a.w5)((()=>[c,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.pedidos.users,((l,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e,onClick:e=>C.seleccionar(l)},[(0,a._)("td",null,(0,d.zw)(e+1),1),(0,a._)("td",null,(0,d.zw)(l.nombreCompleto),1),(0,a._)("td",null,[(0,a.Wm)(M,{size:"20px",value:1,color:"accent"},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.Wm)(y,{color:"white","text-color":"black",label:"Total "+l.pedidos.cantidad},null,8,["label"])])])),_:2},1024),(0,a.Wm)(M,{size:"20px",value:l.pedidos.creados/l.pedidos.cantidad,color:"green"},{default:(0,a.w5)((()=>[(0,a._)("div",b,[(0,a.Wm)(y,{color:"white","text-color":"black",label:"Creados "+l.pedidos.creados},null,8,["label"])])])),_:2},1032,["value"]),(0,a.Wm)(M,{size:"20px",value:l.pedidos.enviados/l.pedidos.cantidad,color:"blue"},{default:(0,a.w5)((()=>[(0,a._)("div",h,[(0,a.Wm)(y,{color:"white","text-color":"black",label:"Enviados "+l.pedidos.enviados},null,8,["label"])])])),_:2},1032,["value"])])],8,p)))),128))]),(0,a._)("tfoot",null,[(0,a._)("tr",null,[v,f,(0,a._)("td",_,(0,d.zw)(C.total),1)])])])),_:1})]),(0,a._)("div",g,[(0,a._)("div",w,[(0,a.Wm)(Z,{modelValue:k.zoom,"onUpdate:modelValue":e[2]||(e[2]=l=>k.zoom=l),zoom:k.zoom,center:k.center},{default:(0,a.w5)((()=>{var l;return[(0,a.Wm)(O,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(null===(l=k.pedidosMapa)||void 0===l?void 0:l.users,(l=>{var e;return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(null===l||void 0===l||null===(e=l.pedidos)||void 0===e?void 0:e.pedidos,((l,e)=>((0,a.wg)(),(0,a.j4)(Q,{key:e,"lat-lng":[parseFloat(l.pedido.cliente.Latitud),parseFloat(l.pedido.cliente.longitud)]},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{content:l.pedido.cliente.Nombres},null,8,["content"]),(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{style:{padding:"2px"},color:"CREADO"===l.pedido.estado?"green":"blue"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,d.zw)(l.pedido.idCli),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1032,["lat-lng"])))),128))],64)})),256))]})),_:1},8,["modelValue","zoom","center"])])])])])),_:1})])),_:1})])),_:1})}o(19544);var k=o(11488),C=o.n(k),W=o(8892);const L={name:"MapaVendedor",components:{LMap:W.iA,LIcon:W.QC,LTileLayer:W.Hw,LMarker:W.$R,LTooltip:W.Gs},data(){return{center:[-17.969721,-67.114493],zoom:13,fecha:C()().format("YYYY-MM-DD"),loading:!1,pedidos:[],pedidosAll:[],pedidosMapa:[],tipos:[{label:"TODOS",value:""},{label:"CERDO",value:"CERDO"},{label:"NORMAL",value:"NORMAL"},{label:"POLLO",value:"POLLO"},{label:"RES",value:"RES"}],tipo:""}},mounted(){this.buscar()},methods:{seleccionar(l){this.pedidosMapa.users=this.pedidosAll.users.filter((e=>e.CodAut===l.CodAut))},buscar(){this.loading=!0,this.$api.post("mapaVendedor",{fecha:this.fecha,tipo:this.tipo}).then((l=>{this.pedidos=l.data,this.pedidosMapa={...l.data},this.pedidosAll={...l.data}})).finally((()=>{this.loading=!1}))}},computed:{total(){let l=0;for(let a=0;a<(null===(e=this.pedidos)||void 0===e||null===(o=e.users)||void 0===o?void 0:o.length);a++){var e,o;l+=this.pedidos.users[a].pedidos.cantidad}return l}}};var z=o(74260),y=o(24379),M=o(10151),D=o(25589),O=o(64689),V=o(63314),q=o(2165),Q=o(30481),Z=o(51598),A=o(69721),R=o(7518),T=o.n(R);const Y=(0,z.Z)(L,[["render",x]]),E=Y;T()(L,"components",{QPage:y.Z,QCard:M.Z,QCardSection:D.Z,QInput:O.Z,QSelect:V.Z,QBtn:q.Z,QMarkupTable:Q.Z,QLinearProgress:Z.Z,QBadge:A.Z})}}]);
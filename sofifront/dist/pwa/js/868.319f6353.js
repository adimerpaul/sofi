"use strict";(self["webpackChunksofi"]=self["webpackChunksofi"]||[]).push([[868],{86868:(l,e,o)=>{o.r(e),o.d(e,{default:()=>U});var a=o(83673),t=o(62323);const s={class:"row"},i={class:"col-xs-12 col-md-4"},n={class:"col-xs-12 col-md-10"},c=(0,a._)("br",null,null,-1),d={class:"col-xs-12 col-md-4"},u=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"#"),(0,a._)("th",null,"Cinit"),(0,a._)("th",null,"Cliente")])],-1),r=["onClick"],p={style:{"text-transform":"lowercase","line-height":"0.9"}},m={class:"col-xs-12 col-md-8"},h={style:{height:"350px",width:"100%"}},g=(0,a._)("br",null,null,-1),_={class:"col-12 col-md-4"},f={class:"row"},b={class:"col-12 col-md-6"},w={class:"col-12 col-md-6"};function v(l,e,o,v,k,C){const V=(0,a.up)("q-input"),y=(0,a.up)("q-markup-table"),z=(0,a.up)("LTileLayer"),x=(0,a.up)("q-badge"),W=(0,a.up)("l-icon"),Y=(0,a.up)("l-marker"),q=(0,a.up)("l-map"),Q=(0,a.up)("q-select"),Z=(0,a.up)("q-btn"),L=(0,a.up)("q-card-section"),M=(0,a.up)("q-card"),D=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(D,{class:"bg-grey-3 q-pa-xs"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{flat:"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(L,null,{default:(0,a.w5)((()=>[(0,a._)("div",s,[(0,a._)("div",i,[(0,a._)("div",n,[(0,a.Wm)(V,{modelValue:k.fecha,"onUpdate:modelValue":[e[0]||(e[0]=l=>k.fecha=l),C.buscar],label:"Fecha",type:"date",dense:"",outlined:"",min:k.minimo},null,8,["modelValue","min","onUpdate:modelValue"])]),c,(0,a._)("div",d,[(0,a.Wm)(y,{flat:"",bordered:"",dense:"","wrap-cells":"",class:"bg-primary text-white cursor-pointer"},{default:(0,a.w5)((()=>[u,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.clientes,((l,e)=>((0,a.wg)(),(0,a.iD)("tr",{key:e,onClick:e=>C.toggleSeleccion(l),class:(0,t.C_)("bg-"+l.color)},[(0,a._)("td",null,(0,t.zw)(e+1),1),(0,a._)("td",null,(0,t.zw)(l.Id),1),(0,a._)("td",null,[(0,a._)("div",p,(0,t.zw)(l.Nombres),1)])],10,r)))),128))])])),_:1})])]),(0,a._)("div",m,[(0,a._)("div",h,[(0,a.Wm)(q,{modelValue:k.zoom,"onUpdate:modelValue":e[1]||(e[1]=l=>k.zoom=l),zoom:k.zoom,center:k.center},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.clientes,((l,e)=>((0,a.wg)(),(0,a.j4)(Y,{key:e,"lat-lng":[parseFloat(l.Latitud),parseFloat(l.longitud)],onClick:e=>C.toggleSeleccion(l)},{default:(0,a.w5)((()=>[(0,a.Wm)(W,null,{default:(0,a.w5)((()=>[(0,a.Wm)(x,{style:{padding:"2px"},color:l.selected?"red":l.color},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(l.Id),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1032,["lat-lng","onClick"])))),128))])),_:1},8,["modelValue","zoom","center"])]),g,(0,a._)("div",_,[(0,a._)("div",f,[(0,a._)("div",b,[(0,a.Wm)(Q,{dense:"",outlined:"",modelValue:k.auto,"onUpdate:modelValue":e[2]||(e[2]=l=>k.auto=l),options:k.vehiculos,"option-label":"placa",label:"Camion Asignar"},null,8,["modelValue","options"])]),(0,a._)("div",w,[(0,a.Wm)(Z,{color:"green",icon:"local_shipping",onClick:C.cambiar,"no-caps":"",label:"Asignar",loading:k.loading},null,8,["onClick","loading"])])])])])])])),_:1})])),_:1})])),_:1})}o(19544);var k=o(11488),C=o.n(k),V=o(8892);const y={name:"MapaVendedor",components:{LMap:V.iA,LIcon:V.QC,LTileLayer:V.Hw,LMarker:V.$R},data(){return{center:[-17.969721,-67.114493],listado:[],vehiculos:[],auto:{},zoom:13,fecha:C()().format("YYYY-MM-DD"),minimo:C()().subtract(1,"days").format("YYYY-MM-DD"),loading:!1,clientes:[],seleccionados:[]}},mounted(){this.buscar(),this.getVehiculo()},methods:{getVehiculo(){this.$api.post("listVehiculo").then((l=>{this.vehiculos=l.data,this.auto=this.vehiculos[0]}))},buscar(){this.loading=!0,this.clientes=[],this.$api.post("mapClientes",{fecha:this.fecha}).then((l=>{this.clientes=l.data.map((l=>({...l,selected:!1})))})).finally((()=>{this.loading=!1}))},toggleSeleccion(l){l.selected=!l.selected,l.selected?this.seleccionados.push(l):this.seleccionados=this.seleccionados.filter((e=>e.Id!==l.Id))},cambiar(){this.loading=!0,this.$api.post("updaVehiPed",{fecha:this.fecha,placa:this.auto.placa,listado:this.seleccionados}).then((l=>{this.buscar()}))}}};var z=o(74260),x=o(24379),W=o(10151),Y=o(25589),q=o(64689),Q=o(30481),Z=o(69721),L=o(63314),M=o(2165),D=o(7518),I=o.n(D);const S=(0,z.Z)(y,[["render",v]]),U=S;I()(y,"components",{QPage:x.Z,QCard:W.Z,QCardSection:Y.Z,QInput:q.Z,QMarkupTable:Q.Z,QBadge:Z.Z,QSelect:L.Z,QBtn:M.Z})}}]);
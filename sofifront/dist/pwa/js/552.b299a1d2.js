"use strict";(self["webpackChunksofi"]=self["webpackChunksofi"]||[]).push([[552],{65552:(o,e,l)=>{l.r(e),l.d(e,{default:()=>Vo});var a=l(83673),t=l(62323),i=l(98880);const n=o=>((0,a.dD)("data-v-6c1726d2"),o=o(),(0,a.Cn)(),o),r={class:"row"},s={class:"col-xs-12 col-md-2 q-pa-xs"},c={class:"col-xs-12 col-md-2 q-pa-xs"},d={class:"col-xs-2 col-md-2 q-pa-xs"},u={class:"col-xs-2 col-md-2 q-pa-xs"},p={class:"col-xs-2 col-md-2 q-pa-xs"},m={class:"row"},g=n((()=>(0,a._)("br",null,null,-1))),h={class:"row"},f={class:"col-xs-12 col-md-12"},b={style:{height:"450px",width:"100%"}},w={class:"tt-header"},y={class:"tt-title"},_=(0,a.Uk)(),k=n((()=>(0,a._)("br",null,null,-1))),C={class:"tt-row"},v=n((()=>(0,a._)("span",{class:"tt-label"},"Territorio:",-1))),O=(0,a.Uk)(),D={class:"tt-row"},W=n((()=>(0,a._)("span",{class:"tt-label"},"Importe:",-1))),V={class:"tt-row"},z=n((()=>(0,a._)("span",{class:"tt-label"},"Vendedor:",-1))),P={class:"tt-row"},A=n((()=>(0,a._)("span",{class:"tt-label"},"Dirección:",-1))),S={key:0,class:"tt-row"},F=n((()=>(0,a._)("span",{class:"tt-label"},"Horario:",-1))),N=n((()=>(0,a._)("br",null,null,-1))),T={class:"col-12 col-md-12"},Z={class:"row"},I={class:"col-12 col-md-2"},U={class:"col-12 col-md-2"},E=(0,a.Uk)("Imprimir Pedidos"),q=(0,a.Uk)("Imprimir Pedidos Por Zona"),x=(0,a.Uk)("Imprimir Productos Totales"),L=n((()=>(0,a._)("div",{class:"col-12 col-md-2"},null,-1))),R=n((()=>(0,a._)("div",{class:"col-12 col-md-2"},null,-1))),j={class:"col-12 col-md-2"},Q={class:"col-12 col-md-2"},$={class:"col-xs-12 col-md-12"},Y=["onClick"],M={key:"op"},G={class:"text-h6"},B=n((()=>(0,a._)("tr",null,[(0,a._)("th",null,"PEDIDO"),(0,a._)("th",null,"CODIGO"),(0,a._)("th",null,"CANTIDAD"),(0,a._)("th",null,"PRODUCTO")],-1))),H=n((()=>(0,a._)("div",{class:"text-h6"},"Asignar Camion",-1))),J=(0,a.Uk)(" Seleccionar Vehículo ");function K(o,e,l,n,K,X){const oo=(0,a.up)("q-input"),eo=(0,a.up)("q-btn"),lo=(0,a.up)("LTileLayer"),ao=(0,a.up)("LGeoJson"),to=(0,a.up)("l-tooltip"),io=(0,a.up)("q-badge"),no=(0,a.up)("l-icon"),ro=(0,a.up)("l-marker"),so=(0,a.up)("l-map"),co=(0,a.up)("q-icon"),uo=(0,a.up)("q-item-section"),po=(0,a.up)("q-item"),mo=(0,a.up)("q-list"),go=(0,a.up)("q-btn-dropdown"),ho=(0,a.up)("q-select"),fo=(0,a.up)("q-table"),bo=(0,a.up)("q-card-section"),wo=(0,a.up)("q-card"),yo=(0,a.up)("q-card-actions"),_o=(0,a.up)("q-dialog"),ko=(0,a.up)("q-space"),Co=(0,a.up)("q-form"),vo=(0,a.up)("q-page"),Oo=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(vo,{class:"bg-grey-3 q-pa-none"},{default:(0,a.w5)((()=>[(0,a.Wm)(wo,{flat:"",bordered:""},{default:(0,a.w5)((()=>[(0,a.Wm)(bo,{class:"q-pa-none"},{default:(0,a.w5)((()=>[(0,a._)("div",r,[(0,a._)("div",s,[(0,a.Wm)(oo,{modelValue:K.fecha,"onUpdate:modelValue":[e[0]||(e[0]=o=>K.fecha=o),X.buscar],label:"Fecha",type:"date",dense:"",outlined:""},null,8,["modelValue","onUpdate:modelValue"])]),(0,a._)("div",c,[(0,a.Wm)(eo,{color:"info",icon:"search",label:"Consultar",onClick:X.buscar,loading:K.loading,"no-caps":"",size:"md"},null,8,["onClick","loading"])]),(0,a._)("div",d,[(0,a.Wm)(eo,{color:"purple",label:"5",onClick:e[1]||(e[1]=o=>X.loadGeoJson(5)),loading:K.loading},null,8,["loading"])]),(0,a._)("div",u,[(0,a.Wm)(eo,{color:"green",label:"4",onClick:e[2]||(e[2]=o=>X.loadGeoJson(4)),loading:K.loading},null,8,["loading"])]),(0,a._)("div",p,[(0,a.Wm)(eo,{color:"orange",label:"3",onClick:e[3]||(e[3]=o=>X.loadGeoJson(3)),loading:K.loading},null,8,["loading"])])]),(0,a._)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.vehiculos,(o=>((0,a.wg)(),(0,a.iD)("div",{class:"q-pa-xs col-md-2 col-xs-4",key:o,style:{"font-size":"12px"}},[(0,a._)("b",null,(0,t.zw)(""==o.placa?"SIN ASIGNAR":o.placa)+" : "+(0,t.zw)(X.calculo(o.placa)),1)])))),128)),g]),(0,a._)("div",h,[(0,a._)("div",f,[(0,a._)("div",b,[(0,a.Wm)(so,{modelValue:K.zoom,"onUpdate:modelValue":e[4]||(e[4]=o=>K.zoom=o),zoom:K.zoom,center:K.center},{default:(0,a.w5)((()=>[(0,a.Wm)(lo,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,a.Wm)(ao,{geojson:K.geojsonData,options:K.geoJsonOptions},null,8,["geojson","options"]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.clientes,((o,e)=>((0,a.wg)(),(0,a.j4)(ro,{key:e,"lat-lng":[parseFloat(o.Latitud),parseFloat(o.longitud)],onClick:e=>X.toggleSeleccion(o)},{default:(0,a.w5)((()=>[(0,a.Wm)(to,{options:X.tooltipOptions(o)},{default:(0,a.w5)((()=>[(0,a._)("div",w,[(0,a._)("span",y,(0,t.zw)(o.Nombres),1),_,k,(0,a._)("span",{class:(0,t.C_)("SI"===o.ruta?"bg-green":"bg-red")},(0,t.zw)("SI"===o.ruta?"EN RUTA":"FUERA DE RUTA"),3)]),(0,a._)("div",C,[v,O,(0,a._)("b",null,(0,t.zw)(o.territorio||"-"),1)]),(0,a._)("div",D,[W,(0,a._)("b",null,(0,t.zw)(Number(o.importe||0).toFixed(2))+" Bs",1)]),(0,a._)("div",V,[z,(0,a.Uk)(" "+(0,t.zw)(o.vendedor||"-"),1)]),(0,a._)("div",P,[A,(0,a.Uk)(" "+(0,t.zw)(o.Direccion||"-"),1)]),o.horario?((0,a.wg)(),(0,a.iD)("div",S,[F,(0,a.Uk)(" "+(0,t.zw)(o.horario),1)])):(0,a.kq)("",!0)])),_:2},1032,["options"]),(0,a.Wm)(no,null,{default:(0,a.w5)((()=>[(0,a.Wm)(io,{style:{padding:"2px"},color:o.selected?"red":o.color},{default:(0,a.w5)((()=>[(0,a.Uk)((0,t.zw)(o.num),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1032,["lat-lng","onClick"])))),128))])),_:1},8,["modelValue","zoom","center"])]),N,(0,a._)("div",T,[(0,a._)("div",Z,[(0,a._)("div",I,[(0,a.Wm)(eo,{color:"green",icon:"local_shipping",onClick:X.cambiar,"no-caps":"",label:"Asignar",loading:K.loading},null,8,["onClick","loading"])]),(0,a._)("div",U,[(0,a.Wm)(go,{color:"info",icon:"print",label:"Reportes","no-caps":""},{default:(0,a.w5)((()=>[(0,a.Wm)(mo,null,{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(po,{clickable:"",onClick:X.generarPdf},{default:(0,a.w5)((()=>[(0,a.Wm)(uo,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(co,{name:"print"})])),_:1}),(0,a.Wm)(uo,null,{default:(0,a.w5)((()=>[E])),_:1})])),_:1},8,["onClick"])),[[Oo]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(po,{clickable:"",onClick:e[5]||(e[5]=o=>K.dialogVehiculo=!0)},{default:(0,a.w5)((()=>[(0,a.Wm)(uo,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(co,{name:"print"})])),_:1}),(0,a.Wm)(uo,null,{default:(0,a.w5)((()=>[q])),_:1})])),_:1})),[[Oo]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(po,{clickable:"",onClick:X.generarPdfProductos},{default:(0,a.w5)((()=>[(0,a.Wm)(uo,{avatar:""},{default:(0,a.w5)((()=>[(0,a.Wm)(co,{name:"print"})])),_:1}),(0,a.Wm)(uo,null,{default:(0,a.w5)((()=>[x])),_:1})])),_:1},8,["onClick"])),[[Oo]])])),_:1})])),_:1})]),L,R,(0,a._)("div",j,[(0,a.Wm)(ho,{square:"",outlined:"",modelValue:K.usuario,"onUpdate:modelValue":[e[6]||(e[6]=o=>K.usuario=o),X.filtrarClientes],options:K.vendedores,label:"Vendedor",dense:""},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,a._)("div",Q,[(0,a.Wm)(ho,{square:"",outlined:"",modelValue:K.tipoProducto,"onUpdate:modelValue":[e[7]||(e[7]=o=>K.tipoProducto=o),X.buscar],options:["NORMAL","POLLO","CERDO"],label:"Producto",dense:""},null,8,["modelValue","onUpdate:modelValue"])])])])]),(0,a._)("div",$,[(0,a.Wm)(fo,{dense:"",rows:K.clientes,columns:K.column,"row-key":"name","rows-per-page-options":["0"],filter:K.filtro,style:{"font-size":"10px",height:"400px"},"virtual-scroll":"",flat:"",bordered:""},{"top-right":(0,a.w5)((()=>[(0,a.Wm)(oo,{outlined:"",dense:"",debounce:"300",modelValue:K.filtro,"onUpdate:modelValue":e[8]||(e[8]=o=>K.filtro=o),placeholder:"buscar"},{append:(0,a.w5)((()=>[(0,a.Wm)(co,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,a.w5)((o=>[(0,a._)("tr",{class:(0,t.C_)(o.row.selected?"bg-red":"bg-"+o.row.color),style:{"font-size":"10px"},onClick:e=>X.toggleSeleccionZoom(o.row)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.column,(e=>((0,a.wg)(),(0,a.iD)("td",{key:e.name,style:{"font-size":"10px"}},(0,t.zw)(o.row[e.field]),1)))),128)),(0,a._)("td",M,[(0,a.Wm)(eo,{color:"info",icon:"visibility",dense:"",flat:"",onClick:e=>X.verDetalle(o.row)},null,8,["onClick"])])],10,Y)])),_:1},8,["rows","columns","filter"])])])])),_:1})])),_:1}),(0,a.Wm)(_o,{modelValue:K.dialogDetalle,"onUpdate:modelValue":e[9]||(e[9]=o=>K.dialogDetalle=o)},{default:(0,a.w5)((()=>[(0,a.Wm)(wo,null,{default:(0,a.w5)((()=>[(0,a.Wm)(bo,null,{default:(0,a.w5)((()=>[(0,a._)("div",G,(0,t.zw)(K.detalle.Nombres),1)])),_:1}),(0,a.Wm)(bo,null,{default:(0,a.w5)((()=>[(0,a._)("table",null,[B,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(K.detalle.contenido,(o=>((0,a.wg)(),(0,a.iD)("tr",{key:o},[(0,a._)("td",null,(0,t.zw)(o.NroPed),1),(0,a._)("td",null,(0,t.zw)(o.cod_prod),1),(0,a._)("td",null,(0,t.zw)(o.Cant),1),(0,a._)("td",null,(0,t.zw)(o.Producto),1)])))),128))])])),_:1}),(0,a.Wm)(yo,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(eo,{flat:"",label:"OK",color:"primary"},null,512),[[Oo]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(_o,{modelValue:K.dialgoCamion,"onUpdate:modelValue":e[14]||(e[14]=o=>K.dialgoCamion=o)},{default:(0,a.w5)((()=>[(0,a.Wm)(wo,{style:{width:"300px"}},{default:(0,a.w5)((()=>[(0,a.Wm)(bo,{class:"row items-center"},{default:(0,a.w5)((()=>[H,(0,a.Wm)(ko),(0,a.Wm)(eo,{flat:"",icon:"close",onClick:e[10]||(e[10]=o=>K.dialgoCamion=!1)})])),_:1}),(0,a.Wm)(bo,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Co,{onSubmit:(0,i.iM)(X.asignarCamion,["prevent"])},{default:(0,a.w5)((()=>[(0,a.Wm)(ho,{modelValue:K.auto,"onUpdate:modelValue":e[11]||(e[11]=o=>K.auto=o),options:K.vehiculos,"option-label":"placa",label:"Camion Asignar",dense:"",outlined:"",rules:[o=>!!o||"Campo requerido"]},null,8,["modelValue","options","rules"]),(0,a.Wm)(ho,{modelValue:K.color,"onUpdate:modelValue":e[12]||(e[12]=o=>K.color=o),options:K.colores,"option-label":"zona",label:"Color Asignar",dense:"",outlined:"",rules:[o=>!!o||"Campo requerido"]},{option:(0,a.w5)((o=>[(0,a.Wm)(po,(0,t.vs)((0,a.F4)(o.itemProps)),{default:(0,a.w5)((()=>[(0,a.Wm)(uo,null,{default:(0,a.w5)((()=>[(0,a._)("div",{class:(0,t.C_)("text-center bg-"+o.opt.color)},(0,t.zw)(o.opt.zona),3)])),_:2},1024)])),_:2},1040)])),"selected-item":(0,a.w5)((o=>[(0,a._)("div",{class:(0,t.C_)("text-center bg-"+o.opt.color)},(0,t.zw)(o.opt.zona),3)])),_:1},8,["modelValue","options","rules"]),(0,a.Wm)(yo,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(eo,{flat:"",label:"Cancelar",color:"primary",onClick:e[13]||(e[13]=o=>K.dialgoCamion=!1),loading:K.loading},null,8,["loading"]),(0,a.Wm)(eo,{label:"Asignar",color:"primary",type:"submit",loading:K.loading},null,8,["loading"])])),_:1})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,a.Wm)(_o,{modelValue:K.dialogVehiculo,"onUpdate:modelValue":e[16]||(e[16]=o=>K.dialogVehiculo=o),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(wo,null,{default:(0,a.w5)((()=>[(0,a.Wm)(bo,{class:"text-h6"},{default:(0,a.w5)((()=>[J])),_:1}),(0,a.Wm)(bo,null,{default:(0,a.w5)((()=>[(0,a.Wm)(ho,{modelValue:K.vehiculoSeleccionado,"onUpdate:modelValue":e[15]||(e[15]=o=>K.vehiculoSeleccionado=o),options:K.vehiculos,"option-label":"placa",label:"Vehículo",outlined:"",dense:""},null,8,["modelValue","options"])])),_:1}),(0,a.Wm)(yo,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(eo,{flat:"",label:"Cancelar",color:"negative"},null,512),[[Oo]]),(0,a.Wm)(eo,{flat:"",label:"Aceptar",color:"primary",onClick:X.confirmarReporteZona},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}l(10071),l(19544);var X=l(11488),oo=l.n(X),eo=l(8892);const lo={name:"mapaCliente",components:{LMap:eo.iA,LIcon:eo.QC,LTileLayer:eo.Hw,LMarker:eo.$R,LTooltip:eo.Gs,LGeoJson:eo.jK},data(){return{dialogVehiculo:!1,vehiculoSeleccionado:null,color:"",colores:[{id:1,zona:"NORTE",color:"deep-orange-4",colorStyle:"background-color: #FF7043"},{id:2,zona:"BOLIVAR",color:"pink-4",colorStyle:"background-color: #F06292"},{id:3,zona:"SE RECOGE",color:"blue-grey-4",colorStyle:"background-color: #37474F"},{id:4,zona:"CENTRO",color:"yellow",colorStyle:"background-color: #F5EE17"},{id:5,zona:"APOYO",color:"green-4",colorStyle:"background-color: #1B5E20"},{id:6,zona:"APOYO2",color:"green-9",colorStyle:"background-color: #2E7D32"},{id:7,zona:"HUANUNI",color:"deep-purple-4",colorStyle:"background-color: #9575CD"},{id:8,zona:"CHALLAPATA",color:"red-10",colorStyle:"background-color: #B71C1C"},{id:9,zona:"LLALLAGUA",color:"red-4",colorStyle:"background-color: #E57373"},{id:10,zona:"CARACOLLO",color:"light-blue-8",colorStyle:"background-color: #0288D1"},{id:11,zona:"SUD",color:"blue-4",colorStyle:"background-color: #0D47A1"},{id:12,zona:"MOTO1",color:"amber-8",colorStyle:"background-color: #FFA000"},{id:13,zona:"SIN ZONA",color:"grey-6",colorStyle:"background-color: #757575"}],tipoProducto:"NORMAL",styleGeoJSON:o=>({color:o.properties.color||"red",weight:2,opacity:.2,fillOpacity:.3}),center:[-17.969721,-67.114493],filtro:"",listado:[],vehiculos:[],auto:{},zoom:13,fecha:oo()().format("YYYY-MM-DD"),minimo:oo()().subtract(1,"days").format("YYYY-MM-DD"),loading:!1,clientes:[],seleccionados:[],column:[{label:"OP",name:"op",field:"op",sortable:!0},{label:"N",name:"id",field:"num",sortable:!0,align:"center"},{label:"CINIT",name:"id",field:"Id",sortable:!0,align:"center"},{label:"CLIENTE",name:"nombre",field:"Nombres",sortable:!0,align:"left"},{label:"DIRECCION",name:"direccion",field:"Direccion",sortable:!0,align:"left"},{label:"IMPORTE",name:"importe",field:"importe",sortable:!0,align:"right"},{label:"HORARIO",name:"horario",field:"horario",sortable:!0,align:"left"},{label:"VENDEDOR",name:"vendedor",field:"vendedor",sortable:!0},{label:"ZONA",name:"zona",field:"territorio",sortable:!0},{label:"PLACA",name:"placa",field:"placa",sortable:!0}],dialgoCamion:!1,geojsonData:null,geojsonData5:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"NORTE",color:"#ff0000"},geometry:{type:"Polygon",coordinates:[[[-67.099879,-17.95474],[-67.100311,-17.944827],[-67.085978,-17.93315],[-67.071816,-17.93217],[-67.075506,-17.919267],[-67.113353,-17.911143],[-67.118482,-17.893828],[-67.134844,-17.895579],[-67.130279,-17.92691],[-67.121165,-17.94142],[-67.120854,-17.948468],[-67.122543,-17.949004],[-67.12654,-17.94755],[-67.127607,-17.956572],[-67.125864,-17.957169],[-67.122549,-17.957674],[-67.117989,-17.956378],[-67.115403,-17.956363],[-67.114395,-17.956552],[-67.109594,-17.957144],[-67.107067,-17.957802],[-67.10601,-17.95376],[-67.104272,-17.954179],[-67.103274,-17.954444],[-67.101654,-17.954852],[-67.100496,-17.955036],[-67.099879,-17.95474]]]}},{type:"Feature",properties:{name:"SUD",color:"green"},geometry:{type:"Polygon",coordinates:[[[-67.092556,-17.963821],[-67.093142,-17.971621],[-67.098464,-17.970519],[-67.100556,-17.977601],[-67.108699,-17.975938],[-67.108957,-17.976918],[-67.111124,-17.976509],[-67.110909,-17.975468],[-67.115952,-17.974713],[-67.116317,-17.975489],[-67.116617,-17.976754],[-67.123312,-17.978958],[-67.127775,-17.976999],[-67.133354,-17.972346],[-67.138847,-17.965569],[-67.144598,-17.96663],[-67.142624,-17.973529],[-67.14477,-17.976958],[-67.145242,-17.981693],[-67.141036,-17.983979],[-67.137045,-17.985898],[-67.138847,-17.99349],[-67.136358,-18.006061],[-67.10606,-18.001],[-67.106575,-17.98998],[-67.096447,-17.983285],[-67.091297,-17.993082],[-67.070526,-18.000428],[-67.049898,-17.981904],[-67.047409,-17.97223],[-67.07303,-17.964433],[-67.074703,-17.973006],[-67.075905,-17.974639],[-67.081012,-17.966515],[-67.092556,-17.963821]]]}},{type:"Feature",properties:{name:"BOLIVAR",color:"blue"},geometry:{type:"Polygon",coordinates:[[[-67.098232,-17.969964],[-67.09815,-17.969718],[-67.097392,-17.967165],[-67.105855,-17.965936],[-67.106005,-17.965896],[-67.106906,-17.96859],[-67.108699,-17.975938],[-67.100598,-17.977326],[-67.098464,-17.970519],[-67.093142,-17.971621],[-67.095195,-17.970559],[-67.098171,-17.970048],[-67.098232,-17.969964]]]}},{type:"Feature",properties:{name:"CENTRO",color:"orange"},geometry:{type:"Polygon",coordinates:[[[-67.107257,-17.964448],[-67.112021,-17.964469],[-67.112665,-17.965122],[-67.112922,-17.965897],[-67.118587,-17.963938],[-67.120196,-17.964836],[-67.120432,-17.967877],[-67.122557,-17.967938],[-67.122771,-17.971939],[-67.119316,-17.972449],[-67.11687,-17.974286],[-67.111763,-17.975041],[-67.110948,-17.975164],[-67.109875,-17.971408],[-67.10891,-17.971551],[-67.107107,-17.964489],[-67.107257,-17.964448]]]}},{type:"Feature",properties:{name:"APOYO",color:"purple"},geometry:{type:"Polygon",coordinates:[[[-67.107067,-17.957679],[-67.10971,-17.957368],[-67.112739,-17.956852],[-67.113297,-17.964405],[-67.107031,-17.963751],[-67.106859,-17.965548],[-67.097392,-17.967042],[-67.098232,-17.969964],[-67.093142,-17.971621],[-67.092556,-17.963821],[-67.081012,-17.966392],[-67.089865,-17.947666],[-67.083771,-17.944808],[-67.089092,-17.936153],[-67.100311,-17.944704],[-67.099948,-17.954411],[-67.09995,-17.955219],[-67.105829,-17.953913],[-67.107067,-17.957679]]]}}]},geojsonData4:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"ZONA SUD",color:"#00FF00"},geometry:{type:"Polygon",coordinates:[[[-67.092526,-17.9638446],[-67.0934008,-17.9716146],[-67.097349,-17.9707982],[-67.0981215,-17.9732474],[-67.0988939,-17.975758],[-67.100911,-17.9752884],[-67.1011041,-17.9758191],[-67.1044301,-17.9750844],[-67.1080349,-17.974023],[-67.1088074,-17.9759824],[-67.1107386,-17.9756967],[-67.116146,-17.9750027],[-67.1212528,-17.974615],[-67.122433,-17.9782582],[-67.1253298,-17.9785133],[-67.1385478,-17.9713697],[-67.1423243,-17.9744721],[-67.1371745,-18.0067992],[-67.118635,-18.0010853],[-67.1040438,-18.0005955],[-67.0892809,-17.9956976],[-67.0839594,-17.9986363],[-67.0683383,-17.9986363],[-67.0635318,-17.9942282],[-67.0587597,-17.9863438],[-67.0507265,-17.980418],[-67.0472504,-17.9680901],[-67.0516706,-17.9664572],[-67.0731712,-17.9671104],[-67.0733,-17.9725805],[-67.0749307,-17.9725805],[-67.0755316,-17.9746216],[-67.0781923,-17.9741317],[-67.0776773,-17.97156],[-67.0809818,-17.9665797],[-67.092526,-17.9638446]]]}},{type:"Feature",properties:{name:"ZONA CENTRO",color:"#FFA500"},geometry:{type:"Polygon",coordinates:[[[-67.0999669,-17.9547953],[-67.1008037,-17.9550607],[-67.1046017,-17.9540605],[-67.1053742,-17.9538156],[-67.1058625,-17.9536869],[-67.1061629,-17.9549933],[-67.1102666,-17.9544279],[-67.1147726,-17.9542238],[-67.1192787,-17.9545095],[-67.120459,-17.9599086],[-67.1207593,-17.9608986],[-67.1202229,-17.9616946],[-67.1199654,-17.9627969],[-67.1198367,-17.9632051],[-67.1191071,-17.9632052],[-67.12018,-17.9655321],[-67.1214245,-17.9673283],[-67.123227,-17.9679406],[-67.1209525,-17.9742271],[-67.1137427,-17.9750844],[-67.1107386,-17.9756967],[-67.1097086,-17.9714105],[-67.1086358,-17.9718595],[-67.1055459,-17.9608374],[-67.1001814,-17.9618172],[-67.0995806,-17.9584288],[-67.0999669,-17.9547953]]]}},{type:"Feature",properties:{name:"ZONA BOLIVAR",color:"#0000FF"},geometry:{type:"Polygon",coordinates:[[[-67.0999669,-17.9547953],[-67.0998618,-17.9552061],[-67.0995346,-17.9584747],[-67.0996204,-17.9594902],[-67.1001569,-17.9619396],[-67.1003607,-17.9618886],[-67.1055106,-17.9609088],[-67.1072379,-17.9671038],[-67.107549,-17.9682876],[-67.1088794,-17.9726351],[-67.1085146,-17.9729413],[-67.1089009,-17.9738291],[-67.104148,-17.9749517],[-67.1031717,-17.9751967],[-67.1022651,-17.9754926],[-67.1011041,-17.9758191],[-67.100911,-17.9752884],[-67.0988939,-17.975758],[-67.0981215,-17.9732474],[-67.0974425,-17.971135],[-67.0973245,-17.9706145],[-67.0934621,-17.9713697],[-67.0926252,-17.9643686],[-67.0928398,-17.9617151],[-67.0933333,-17.9594902],[-67.09402,-17.9574694],[-67.0949641,-17.9555914],[-67.096316,-17.9531827],[-67.0999669,-17.9547953]]]}},{type:"Feature",properties:{name:"ZONA NORTE",color:"#800080"},geometry:{type:"Polygon",coordinates:[[[-67.1046017,-17.9540605],[-67.1008037,-17.9550607],[-67.096316,-17.9531827],[-67.0791921,-17.945785],[-67.0861015,-17.9354962],[-67.0785055,-17.9299432],[-67.0850286,-17.9190818],[-67.0964012,-17.9260642],[-67.1100053,-17.9184285],[-67.1126669,-17.8967851],[-67.1372145,-17.8989087],[-67.1233099,-17.9284732],[-67.1200483,-17.9372925],[-67.1200483,-17.951174],[-67.1195525,-17.9543809],[-67.1128147,-17.9540135],[-67.1089524,-17.9544626],[-67.1061629,-17.9549933],[-67.1058625,-17.9536869],[-67.1046017,-17.9540605]]]}}]},url:"https://bsofia.tuprogam.com/api/",geojsonData3:{type:"FeatureCollection",features:[{type:"Feature",properties:{name:"CENTRO/BOLIVAR",color:"#1f77b4"},geometry:{type:"Polygon",coordinates:[[[-67.1001614,-17.9618895],[-67.0996035,-17.9593584],[-67.0996571,-17.9565364],[-67.0998663,-17.9556791],[-67.1000326,-17.954837],[-67.1006979,-17.9551126],[-67.1041525,-17.954092],[-67.1042813,-17.9565824],[-67.1055258,-17.9604097],[-67.1061481,-17.96241],[-67.1102143,-17.9622059],[-67.1125854,-17.9622876],[-67.1135832,-17.9622876],[-67.1133793,-17.9625427],[-67.1144522,-17.9644206],[-67.1174992,-17.9634],[-67.1208037,-17.9637674],[-67.1189154,-17.9650737],[-67.1193875,-17.9662984],[-67.1220482,-17.9676048],[-67.1232069,-17.972136],[-67.1188725,-17.9749935],[-67.1165551,-17.974422],[-67.1108044,-17.9754833],[-67.109989,-17.9715237],[-67.1087016,-17.9718502],[-67.1089161,-17.972585],[-67.1083582,-17.9729932],[-67.1088303,-17.9737688],[-67.1083153,-17.9740138],[-67.1042813,-17.9749935],[-67.1037234,-17.9733606],[-67.1016205,-17.9739729],[-67.0998824,-17.9683803],[-67.0981015,-17.9624611],[-67.1001614,-17.9618895]]]}},{type:"Feature",properties:{name:"ZONA SUD",color:"#2ca02c"},geometry:{type:"Polygon",coordinates:[[[-67.0998663,-17.9549646],[-67.0991195,-17.9594247],[-67.1000541,-17.9619712],[-67.0979942,-17.9625428],[-67.1015132,-17.9740546],[-67.1036161,-17.9734423],[-67.1042478,-17.9751413],[-67.1062434,-17.9746311],[-67.1082604,-17.9741208],[-67.1089471,-17.9767945],[-67.1101058,-17.976815],[-67.1113569,-17.9766065],[-67.1123868,-17.9795456],[-67.1161634,-17.980362],[-67.1225149,-17.9797089],[-67.1355611,-17.9756269],[-67.1403676,-17.9697486],[-67.139166,-17.9852603],[-67.1373636,-18.0023214],[-67.1346599,-18.0020358],[-67.1331364,-17.9982197],[-67.1232015,-18.0019133],[-67.1027738,-18.0006073],[-67.0897275,-17.9945666],[-67.0698148,-17.9939135],[-67.0689565,-17.9862399],[-67.0500738,-17.9823213],[-67.0505887,-17.9735858],[-67.0735145,-17.9705686],[-67.0733857,-17.9728546],[-67.074759,-17.9726097],[-67.0754457,-17.9746915],[-67.0779777,-17.9742833],[-67.0776344,-17.9712217],[-67.0804239,-17.9679968],[-67.0835996,-17.9613018],[-67.0925689,-17.9613426],[-67.0939422,-17.9570969],[-67.096088,-17.9532236],[-67.0975502,-17.953854],[-67.099152,-17.9545406],[-67.0998663,-17.9549646]]]}},{type:"Feature",properties:{name:"ZONA NORTE",color:"#d62728"},geometry:{type:"Polygon",coordinates:[[[-67.0960451,-17.9532848],[-67.08897,-17.9481364],[-67.0878542,-17.9405424],[-67.0841635,-17.9372761],[-67.0864809,-17.9337647],[-67.0779837,-17.9266601],[-67.0841635,-17.9220869],[-67.08897,-17.9248635],[-67.0926607,-17.9211885],[-67.0946348,-17.9245368],[-67.1063936,-17.9203719],[-67.1125734,-17.9162885],[-67.1151483,-17.8983205],[-67.1188391,-17.8889274],[-67.1273363,-17.8939099],[-67.1308554,-17.8850884],[-67.1357477,-17.8876205],[-67.1327436,-17.8987289],[-67.1348036,-17.9071414],[-67.1342028,-17.9133484],[-67.138666,-17.9203719],[-67.1357477,-17.9262518],[-67.1292246,-17.9296],[-67.1256197,-17.9318865],[-67.1213935,-17.9352188],[-67.1202777,-17.9396284],[-67.1239684,-17.9428947],[-67.1225951,-17.9487738],[-67.1268867,-17.9458343],[-67.1289466,-17.9486922],[-67.1268867,-17.9520399],[-67.1281741,-17.9552243],[-67.1234534,-17.9579188],[-67.1177886,-17.956694],[-67.1163295,-17.9584087],[-67.1135832,-17.9622876],[-67.1098013,-17.9621855],[-67.1061481,-17.96241],[-67.1041525,-17.954092],[-67.1000326,-17.954837],[-67.0960451,-17.9532848]]]}}]},enableTooltip:!0,options:{onEachFeature:this.onEachFeatureFunction},vendedores:[],filtercliente:[],geoJsonOptions:{style:o=>({color:o.properties.color,weight:.5,opacity:.1,fillOpacity:.2})},detalle:[],dialogDetalle:!1,usuario:[]}},mounted(){this.colores.sort(((o,e)=>o.zona.localeCompare(e.zona))),this.geojsonData=this.geojsonData5,this.buscar(),this.getVehiculo()},methods:{tooltipOptions(o){return{permanent:!1,direction:"top",offset:[0,-10],className:"pedido-tooltip"}},confirmarReporteZona(){if(!this.vehiculoSeleccionado||!this.vehiculoSeleccionado.placa)return void this.$q.notify({type:"warning",message:"Debe seleccionar un vehículo"});const o=`${this.url}reportePedidoZona/${this.fecha}/${this.vehiculoSeleccionado.placa}`;window.open(o,"_blank"),this.dialogVehiculo=!1},filtrarClientes(){"TODOS"==this.usuario?this.clientes=this.filtercliente:this.clientes=this.filtercliente.filter((o=>o.vendedor===this.usuario))},loadGeoJson(o){switch(o){case 5:this.geojsonData=this.geojsonData5;break;case 4:this.geojsonData=this.geojsonData4;break;case 3:this.geojsonData=this.geojsonData3;break}},verDetalle(o){o.fecha=this.fecha,console.log(o),this.$api.post("detallePedMap",o).then((e=>{console.log(e.data),this.detalle=o,this.detalle.contenido=e.data,this.dialogDetalle=!0}))},calculo(o){let e=0;return this.clientes.forEach((l=>{l.placa==o&&e++})),e},onEachFeatureFunction(){return this.enableTooltip?(o,e)=>{e.bindTooltip("<div>"+o.properties.name+"</div>",{permanent:!1,sticky:!0})}:()=>{}},generarPdf(){const o=`${this.url}reportePedido/${this.fecha}`;window.open(o,"_blank")},generarPdfZona(){const o=`${this.url}reportePedidoZona/${this.fecha}`;window.open(o,"_blank")},generarPdfProductos(){const o=`${this.url}reportePedidoProductos/${this.fecha}`;window.open(o,"_blank")},getVehiculo(){this.$api.post("listVehiculo").then((o=>{o.data.forEach((o=>{o.cantidad=0})),this.vehiculos=o.data,this.auto=this.vehiculos[0]}))},buscar(){this.loading=!0,this.clientes=[],this.vendedores=[];const o=new Set;this.usuario=[],this.$api.post("mapClientes",{fecha:this.fecha,tipo:this.tipoProducto}).then((e=>{console.log(e.data);let l=1;e.data.forEach((e=>{e.num=l,e.selected=!1,e.showTooltip=!1,l++,o.add(e.vendedor)})),this.vendedores=Array.from(o),this.vendedores.push("TODOS"),this.usuario="TODOS",this.clientes=e.data,this.filtercliente=this.clientes,console.log(this.usuario)})).finally((()=>{this.loading=!1}))},toggleSeleccion(o){o.selected=!o.selected,o.selected?this.seleccionados.push(o):this.seleccionados=this.seleccionados.filter((e=>e.Id!==o.Id)),this.$nextTick((()=>{o.showTooltip=!0,o.marker&&o.marker.leafletObject&&o.marker.leafletObject.openTooltip()}))},toggleSeleccionZoom(o){this.center=[o.Latitud,o.longitud],this.zoom=17,o.selected=!o.selected,o.selected?this.seleccionados.push(o):this.seleccionados=this.seleccionados.filter((e=>e.Id!==o.Id)),this.$nextTick((()=>{o.showTooltip=!0,o.marker&&o.marker.leafletObject&&o.marker.leafletObject.openTooltip()}))},asignarCamion(){this.loading=!0,this.$api.post("updaVehiPed",{fecha:this.fecha,placa:this.auto.placa,listado:this.seleccionados,color:this.color}).then((o=>{this.seleccionados=[],this.buscar(),this.dialgoCamion=!1})).finally((()=>{this.loading=!1}))},cambiar(){this.dialgoCamion=!0}}};var ao=l(74260),to=l(24379),io=l(10151),no=l(25589),ro=l(64689),so=l(2165),co=l(69721),uo=l(63314),po=l(42670),mo=l(27011),go=l(83414),ho=l(52035),fo=l(24554),bo=l(55242),wo=l(30481),yo=l(46778),_o=l(99367),ko=l(62025),Co=l(68689),vo=l(60677),Oo=l(7518),Do=l.n(Oo);const Wo=(0,ao.Z)(lo,[["render",K],["__scopeId","data-v-6c1726d2"]]),Vo=Wo;Do()(lo,"components",{QPage:to.Z,QCard:io.Z,QCardSection:no.Z,QInput:ro.Z,QBtn:so.Z,QBadge:co.Z,QSelect:uo.Z,QBtnDropdown:po.Z,QList:mo.Z,QItem:go.Z,QItemSection:ho.Z,QIcon:fo.Z,QTable:bo.Z,QMarkupTable:wo.Z,QDialog:yo.Z,QCardActions:_o.Z,QSpace:ko.Z,QForm:Co.Z}),Do()(lo,"directives",{ClosePopup:vo.Z})}}]);
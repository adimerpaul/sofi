"use strict";(self["webpackChunksofi"]=self["webpackChunksofi"]||[]).push([[601],{63601:(l,e,o)=>{o.r(e),o.d(e,{default:()=>H});var d=o(83673),a=o(62323);const t={class:"row"},s={class:"col-12 col-md-3"},i={class:"col-12 col-md-2 text-center"},n=(0,d._)("div",{class:"col-12"},null,-1),u={class:"col-12 col-md-4"},r=(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",null,"#"),(0,d._)("th",null,"Pedidos"),(0,d._)("th",null,"Cantidades")])],-1),c=["onClick"],p={class:"absolute-full flex flex-center"},m={class:"absolute-full flex flex-center"},f={class:"absolute-full flex flex-center"},h=(0,d._)("td",null,null,-1),_=(0,d._)("td",{class:"text-right text-bold"},"Total",-1),b={class:"text-bold text-right"},g={class:"col-12 col-md-8"},v={style:{height:"350px",width:"100%"}};function w(l,e,o,w,x,k){const C=(0,d.up)("q-input"),W=(0,d.up)("q-btn"),z=(0,d.up)("q-badge"),y=(0,d.up)("q-linear-progress"),L=(0,d.up)("q-markup-table"),M=(0,d.up)("LTileLayer"),q=(0,d.up)("l-tooltip"),Q=(0,d.up)("l-icon"),Z=(0,d.up)("l-marker"),D=(0,d.up)("l-map"),V=(0,d.up)("q-card-section"),Y=(0,d.up)("q-card"),A=(0,d.up)("q-page");return(0,d.wg)(),(0,d.j4)(A,{class:"bg-grey-3 q-pa-xs"},{default:(0,d.w5)((()=>[(0,d.Wm)(Y,{flat:"",bordered:""},{default:(0,d.w5)((()=>[(0,d.Wm)(V,null,{default:(0,d.w5)((()=>[(0,d._)("div",t,[(0,d._)("div",s,[(0,d.Wm)(C,{modelValue:x.fecha,"onUpdate:modelValue":e[0]||(e[0]=l=>x.fecha=l),label:"Fecha",type:"date",dense:"",outlined:""},null,8,["modelValue"])]),(0,d._)("div",i,[(0,d.Wm)(W,{label:"Buscar",color:"primary",dense:"",onClick:k.buscar,icon:"search","no-caps":"",loading:x.loading},null,8,["onClick","loading"])]),n,(0,d._)("div",u,[(0,d.Wm)(L,{flat:"",bordered:"",dense:"","wrap-cells":""},{default:(0,d.w5)((()=>[r,(0,d._)("tbody",null,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(x.pedidos.users,((l,e)=>((0,d.wg)(),(0,d.iD)("tr",{key:e,onClick:e=>k.seleccionar(l)},[(0,d._)("td",null,(0,a.zw)(e+1),1),(0,d._)("td",null,(0,a.zw)(l.nombreCompleto),1),(0,d._)("td",null,[(0,d.Wm)(y,{size:"20px",value:1,color:"accent"},{default:(0,d.w5)((()=>[(0,d._)("div",p,[(0,d.Wm)(z,{color:"white","text-color":"black",label:"Total "+l.pedidos.cantidad},null,8,["label"])])])),_:2},1024),(0,d.Wm)(y,{size:"20px",value:l.pedidos.creados/l.pedidos.cantidad,color:"green"},{default:(0,d.w5)((()=>[(0,d._)("div",m,[(0,d.Wm)(z,{color:"white","text-color":"black",label:"Creados "+l.pedidos.creados},null,8,["label"])])])),_:2},1032,["value"]),(0,d.Wm)(y,{size:"20px",value:l.pedidos.enviados/l.pedidos.cantidad,color:"blue"},{default:(0,d.w5)((()=>[(0,d._)("div",f,[(0,d.Wm)(z,{color:"white","text-color":"black",label:"Enviados "+l.pedidos.enviados},null,8,["label"])])])),_:2},1032,["value"])])],8,c)))),128))]),(0,d._)("tfoot",null,[(0,d._)("tr",null,[h,_,(0,d._)("td",b,(0,a.zw)(k.total),1)])])])),_:1})]),(0,d._)("div",g,[(0,d._)("div",v,[(0,d.Wm)(D,{modelValue:x.zoom,"onUpdate:modelValue":e[1]||(e[1]=l=>x.zoom=l),zoom:x.zoom,center:x.center},{default:(0,d.w5)((()=>{var l;return[(0,d.Wm)(M,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(null===(l=x.pedidosMapa)||void 0===l?void 0:l.users,(l=>{var e;return(0,d.wg)(),(0,d.iD)(d.HY,null,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(null===l||void 0===l||null===(e=l.pedidos)||void 0===e?void 0:e.pedidos,((l,e)=>((0,d.wg)(),(0,d.j4)(Z,{key:e,"lat-lng":[parseFloat(l.pedido.cliente.Latitud),parseFloat(l.pedido.cliente.longitud)]},{default:(0,d.w5)((()=>[(0,d.Wm)(q,{content:l.pedido.cliente.Nombres},null,8,["content"]),(0,d.Wm)(Q,null,{default:(0,d.w5)((()=>[(0,d.Wm)(z,{style:{padding:"2px"},color:"CREADO"===l.pedido.estado?"green":"blue"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,a.zw)(l.pedido.idCli),1)])),_:2},1032,["color"])])),_:2},1024)])),_:2},1032,["lat-lng"])))),128))],64)})),256))]})),_:1},8,["modelValue","zoom","center"])])])])])),_:1})])),_:1})])),_:1})}o(19544);var x=o(11488),k=o.n(x),C=o(8892);const W={name:"MapaVendedor",components:{LMap:C.iA,LIcon:C.QC,LTileLayer:C.Hw,LMarker:C.$R,LTooltip:C.Gs},data(){return{center:[-17.969721,-67.114493],zoom:13,fecha:k()().format("YYYY-MM-DD"),loading:!1,pedidos:[],pedidosAll:[],pedidosMapa:[]}},mounted(){this.buscar()},methods:{seleccionar(l){this.pedidosMapa.users=this.pedidosAll.users.filter((e=>e.CodAut===l.CodAut))},buscar(){this.loading=!0,this.$api.post("mapaVendedor",{fecha:this.fecha}).then((l=>{this.pedidos=l.data,this.pedidosMapa={...l.data},this.pedidosAll={...l.data}})).finally((()=>{this.loading=!1}))}},computed:{total(){let l=0;for(let d=0;d<(null===(e=this.pedidos)||void 0===e||null===(o=e.users)||void 0===o?void 0:o.length);d++){var e,o;l+=this.pedidos.users[d].pedidos.cantidad}return l}}};var z=o(74260),y=o(24379),L=o(10151),M=o(25589),q=o(64689),Q=o(2165),Z=o(30481),D=o(51598),V=o(69721),Y=o(7518),A=o.n(Y);const T=(0,z.Z)(W,[["render",w]]),H=T;A()(W,"components",{QPage:y.Z,QCard:L.Z,QCardSection:M.Z,QInput:q.Z,QBtn:Q.Z,QMarkupTable:Z.Z,QLinearProgress:D.Z,QBadge:V.Z})}}]);
"use strict";(self["webpackChunksofi"]=self["webpackChunksofi"]||[]).push([[145],{49145:(t,e,l)=>{l.r(e),l.d(e,{default:()=>B});var s=l(83673),a=l(62323);const o={class:"row q-col-gutter-md q-mb-md"},r={class:"col-12 col-sm-3"},n={class:"col-12 col-sm-3"},c={class:"col-12 col-sm-2 flex items-center"},d={class:"col-12 col-sm-4 flex items-center justify-end"},i=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{class:"text-left"},"#"),(0,s._)("th",{class:"text-left"},"Fecha"),(0,s._)("th",{class:"text-left"},"Email"),(0,s._)("th",{class:"text-left"},"Score"),(0,s._)("th",{class:"text-left"},"Comentario"),(0,s._)("th",{class:"text-left"},"Ref ID"),(0,s._)("th",{class:"text-left"},"IP")])],-1),m={key:0},u={class:"text-left"},f={class:"text-left"},p={class:"text-left"},w={class:"text-left"},g={class:"text-left"},h={class:"text-left"},_={class:"text-left"},x={key:1},y=(0,s._)("tr",null,[(0,s._)("td",{colspan:"7",class:"text-center text-grey"},"Sin datos para el rango seleccionado")],-1),D=[y],b={key:2},k={colspan:"7",class:"text-center"},q=(0,s.Uk)(" Cargando... ");function v(t,e,l,y,v,Z){const z=(0,s.up)("q-input"),Y=(0,s.up)("q-btn"),C=(0,s.up)("q-badge"),Q=(0,s.up)("q-chip"),W=(0,s.up)("q-spinner"),V=(0,s.up)("q-markup-table"),M=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(M,{class:"q-pa-md"},{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s._)("div",r,[(0,s.Wm)(z,{modelValue:v.filters.from,"onUpdate:modelValue":e[0]||(e[0]=t=>v.filters.from=t),type:"date",label:"Desde",dense:"",outlined:""},null,8,["modelValue"])]),(0,s._)("div",n,[(0,s.Wm)(z,{modelValue:v.filters.to,"onUpdate:modelValue":e[1]||(e[1]=t=>v.filters.to=t),type:"date",label:"Hasta",dense:"",outlined:""},null,8,["modelValue"])]),(0,s._)("div",c,[(0,s.Wm)(Y,{loading:v.loading,color:"primary",icon:"search",label:"Buscar","no-caps":"",onClick:Z.load},null,8,["loading","onClick"])]),(0,s._)("div",d,[(0,s.Wm)(C,{color:"grey-8","text-color":"white",class:"q-pa-sm"},{default:(0,s.w5)((()=>[(0,s.Uk)(" Total: "+(0,a.zw)(v.rows.length),1)])),_:1})])]),(0,s.Wm)(V,{flat:"",bordered:"",dense:""},{default:(0,s.w5)((()=>[i,!v.loading&&v.rows.length?((0,s.wg)(),(0,s.iD)("tbody",m,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(v.rows,((t,e)=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id},[(0,s._)("td",u,(0,a.zw)(e+1),1),(0,s._)("td",f,(0,a.zw)(Z.formatDate(t.created_at)),1),(0,s._)("td",p,(0,a.zw)(t.email||"-"),1),(0,s._)("td",w,[(0,s.Wm)(Q,{square:"",dense:"","text-color":"white",color:10===t.score?"positive":5===t.score?"amber-7":"negative"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,a.zw)(t.score),1)])),_:2},1032,["color"])]),(0,s._)("td",g,(0,a.zw)(t.comment||"-"),1),(0,s._)("td",h,(0,a.zw)(t.ref_id||"-"),1),(0,s._)("td",_,(0,a.zw)(t.ip||"-"),1)])))),128))])):v.loading||v.rows.length?((0,s.wg)(),(0,s.iD)("tbody",b,[(0,s._)("tr",null,[(0,s._)("td",k,[(0,s.Wm)(W,{size:"24px",class:"q-mr-sm"}),q])])])):((0,s.wg)(),(0,s.iD)("tbody",x,D))])),_:1})])),_:1})}var Z=l(21082);const z={name:"EncuestaIndexSimple",data(){const t=Z.ZP.formatDate(Date.now(),"YYYY-MM-DD");return{loading:!1,rows:[],filters:{from:t,to:t}}},methods:{formatDate(t){return t?Z.ZP.formatDate(t,"YYYY-MM-DD HH:mm"):""},async load(){this.loading=!0;try{const t={from:this.filters.from||void 0,to:this.filters.to||void 0,all:1},e=await this.$api.get("encuestas",{params:t});this.rows=e.data}catch(t){console.error(t),this.$q.notify({type:"negative",message:"No se pudo cargar encuestas"}),this.rows=[]}finally{this.loading=!1}}},mounted(){this.load()}};var Y=l(74260),C=l(24379),Q=l(64689),W=l(2165),V=l(69721),M=l(30481),U=l(67030),H=l(39754),I=l(7518),P=l.n(I);const S=(0,Y.Z)(z,[["render",v]]),B=S;P()(z,"components",{QPage:C.Z,QInput:Q.Z,QBtn:W.Z,QBadge:V.Z,QMarkupTable:M.Z,QChip:U.Z,QSpinner:H.Z})}}]);